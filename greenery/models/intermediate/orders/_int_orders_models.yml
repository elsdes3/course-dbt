version: 2

models:
  - name: int_orders_joined_to_addresses_promos
    description: total daily product page views, sessions and orders
    columns:
      - name: order_id
        description: UUID for each unique order on platform
      - name: created_at
        description: Timestamp when the order was created
        data_tests:
          - order_before_delivery:
              field: delivered_at
          - order_before_delivery:
              field: estimated_delivery_at
      - name: user_id
        description: UserId of the user that placed this order
        data_tests:
          - not_null
      - name: state_name
        description: state this user address is based in
        data_tests:
          - not_null
      - name: order_cost
        description: Dollar amout of the items in the order
        data_tests:
          - positive_values
      - name: shipping_cost
        description: Cost of shipping for the order
        data_tests:
          - positive_values
      - name: promo_id
        description: Each unique promocode on platform
        data_tests:
          - accepted_values:
              values:
                - 'instruction set'
                - Optional
                - Mandatory
                - Digitized
                - 'task-force'
                - leverage
      - name: discount
        description: Absolute dollar amount that is given off with the promo code
        data_tests:
          - positive_values
      - name: order_total
        description: Total cost of the order including shipping
        data_tests:
          - positive_values
      - name: total_order_size
        description: Total number of units of the product in this order
        data_tests:
          - positive_values
      - name: num_unique_products
        description: >
            number of uniqie items offered by Greenery that are included in
            this order
        data_tests:
          - positive_values
      - name: status
        description: Status of the order
        data_tests:
          - accepted_values:
              values: [delivered, shipped, preparing]
      - name: delivered_at
        description: Actual timestamp of delivery
      - name: estimated_delivery_at
        description: Estimated timestamp of delivery
      - name: is_on_time_delivery
        description: >
            whether product was delivered after estimated delivery time
        data_tests:
          - accepted_values:
              values: [True, False]
